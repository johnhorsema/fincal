const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SimpleHome-TMSNiSXy.js","assets/vendor-D5qdfc4z.js","assets/PersonaSelector.vue_vue_type_script_setup_true_lang-DV2e7bl_.js","assets/validation-DEoFzFxq.js","assets/Transactions-bRtTpiCO.js","assets/Accounts-C1XnudU9.js","assets/FormValidator-tn0RQdqM.css","assets/UserDemo-OPHByCuy.js"])))=>i.map(i=>d[i]);
var F=Object.defineProperty;var H=(n,e,t)=>e in n?F(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var l=(n,e,t)=>H(n,typeof e!="symbol"?e+"":e,t);import{d as _,r as E,c as V,a as f,b as i,w as Q,v as J,t as R,o as h,e as L,n as P,f as G,F as W,g as K,h as g,i as b,j as M,k as Y,l as I,m as D,p as Z,q as m,s as X,u as ee,x as U,T as A,y as te,z as re,A as se}from"./vendor-D5qdfc4z.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();const oe="modulepreload",ne=function(n){return"/"+n},$={},T=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(p=>{if(p=ne(p),p in $)return;$[p]=!0;const u=p.endsWith(".css"),S=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${S}`))return;const y=document.createElement("link");if(y.rel=u?"stylesheet":oe,u||(y.as="script"),y.crossOrigin="",y.href=p,c&&y.setAttribute("nonce",c),document.head.appendChild(y),u)return new Promise((B,z)=>{y.addEventListener("load",B),y.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},ie={class:"bg-white/80 backdrop-blur-md shadow-soft border-b border-gray-200/50 px-4 sm:px-6 py-3 sticky top-0 z-30"},ae={class:"flex items-center justify-between"},ce={class:"flex items-center space-x-3 sm:space-x-4"},le={class:"relative hidden sm:block"},ue={class:"sm:hidden"},de={class:"text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded-full"},he={class:"flex items-center"},pe={class:"h-8 w-8 rounded-full bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center shadow-md hover:shadow-lg transition-all duration-200 hover:scale-105 cursor-pointer"},ge={class:"text-sm font-medium text-white"},me=_({__name:"AppHeader",emits:["toggle-sidebar"],setup(n){const e=E("accountant"),t=E("John Doe"),r=V(()=>t.value.split(" ").map(a=>a.charAt(0)).join("").toUpperCase()),s=a=>({accountant:"ðŸ‘¨â€ðŸ’¼",marketing:"ðŸ“¢",manager:"ðŸ‘”",admin:"âš™ï¸"})[a]||"ðŸ‘¤";return(a,o)=>(h(),f("header",ie,[i("div",ae,[i("button",{onClick:o[0]||(o[0]=c=>a.$emit("toggle-sidebar")),class:"lg:hidden p-2 rounded-lg text-gray-400 hover:text-gray-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-primary-500 transition-all duration-200 hover:scale-105"},[...o[2]||(o[2]=[i("span",{class:"sr-only"},"Open sidebar",-1),i("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),o[6]||(o[6]=i("div",{class:"flex items-center"},[i("div",{class:"flex-shrink-0 lg:hidden"},[i("h1",{class:"text-xl font-bold bg-gradient-to-r from-primary-600 to-primary-800 bg-clip-text text-transparent"}," FinCal ")])],-1)),i("div",ce,[i("div",le,[Q(i("select",{"onUpdate:modelValue":o[1]||(o[1]=c=>e.value=c),class:"appearance-none bg-white/90 border border-gray-300 rounded-lg px-3 py-2 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-all duration-200 hover:shadow-sm"},[...o[3]||(o[3]=[i("option",{value:"accountant"},"ðŸ‘¨â€ðŸ’¼ Accountant",-1),i("option",{value:"marketing"},"ðŸ“¢ Marketing",-1),i("option",{value:"manager"},"ðŸ‘” Manager",-1),i("option",{value:"admin"},"âš™ï¸ Admin",-1)])],512),[[J,e.value]]),o[4]||(o[4]=i("div",{class:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},[i("svg",{class:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))]),i("div",ue,[i("div",de,R(s(e.value)),1)]),o[5]||(o[5]=i("button",{class:"relative p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-all duration-200 hover:scale-105"},[i("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-5 5v-5zM10.5 3.75a6 6 0 0 1 6 6v2.25a2.25 2.25 0 0 1-2.25 2.25H7.5a2.25 2.25 0 0 1-2.25-2.25V9.75a6 6 0 0 1 6-6z"})]),i("span",{class:"absolute -top-1 -right-1 h-3 w-3 bg-error-500 rounded-full animate-pulse"})],-1)),i("div",he,[i("div",pe,[i("span",ge,R(r.value),1)])])])])]))}}),fe={class:"flex flex-col h-full"},ye={class:"flex items-center justify-between h-16 px-4 border-b border-gray-200/50"},ve={class:"flex-1 px-4 py-6 space-y-1"},be={key:0,class:"ml-auto w-2 h-2 bg-white rounded-full animate-pulse"},C=_({__name:"AppSidebar",props:{isOpen:{type:Boolean}},emits:["toggle"],setup(n){const a=[{name:"Feed",href:"/",icon:()=>m("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})])},{name:"Transactions",href:"/transactions",icon:()=>m("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])},{name:"Accounts",href:"/accounts",icon:()=>m("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})])},{name:"User Demo",href:"/user-demo",icon:()=>m("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])}];return(o,c)=>{const p=L("router-link");return h(),f("div",{class:P(["fixed inset-y-0 left-0 z-50 w-64 bg-white/95 backdrop-blur-md shadow-strong transform transition-all duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 lg:shadow-soft",n.isOpen?"translate-x-0":"-translate-x-full"])},[i("div",fe,[i("div",ye,[c[2]||(c[2]=i("div",{class:"flex items-center"},[i("div",{class:"flex-shrink-0"},[i("h1",{class:"text-xl font-bold bg-gradient-to-r from-primary-600 to-primary-800 bg-clip-text text-transparent"}," FinCal ")])],-1)),i("button",{onClick:c[0]||(c[0]=u=>o.$emit("toggle")),class:"lg:hidden p-2 rounded-lg text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-all duration-200 hover:scale-105"},[...c[1]||(c[1]=[i("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),i("nav",ve,[(h(),f(W,null,K(a,(u,S)=>g(p,{key:u.name,to:u.href,class:P([["group flex items-center px-3 py-3 text-sm font-medium rounded-xl transition-all duration-200 hover:scale-105",o.$route.path===u.href?"bg-black text-white shadow-md":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"],"fade-in"]),style:Z({animationDelay:`${S*50}ms`})},{default:b(()=>[(h(),M(D(u.icon),{class:P(["mr-3 h-5 w-5 transition-transform duration-200 group-hover:scale-110",o.$route.path===u.href?"text-white":"text-gray-400 group-hover:text-gray-600"])},null,8,["class"])),Y(" "+R(u.name)+" ",1),o.$route.path===u.href?(h(),f("div",be)):I("",!0)]),_:2},1032,["to","class","style"])),64))]),c[3]||(c[3]=G('<div class="flex-shrink-0 p-4 border-t border-gray-200/50"><div class="text-xs text-gray-500 text-center"><div class="font-medium">Social Accounting Feed</div><div class="mt-1 opacity-75">v1.0.0</div></div><div class="mt-3 flex items-center justify-center space-x-2"><div class="w-2 h-2 bg-success-500 rounded-full animate-pulse"></div><span class="text-xs text-gray-500">Online</span></div></div>',1))])],2)}}}),we={class:"flex-1 overflow-y-auto bg-gradient-to-br from-gray-50 to-gray-100 relative"},Ee={class:"relative"},_e={class:"container mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 max-w-7xl"},Te={class:"fade-in"},xe=_({__name:"AppMain",setup(n){const e=E(!1),t=()=>{e.value=window.scrollY>300},r=()=>{window.scrollTo({top:0,behavior:"smooth"})};return X(()=>{window.addEventListener("scroll",t)}),ee(()=>{window.removeEventListener("scroll",t)}),(s,a)=>(h(),f("main",we,[a[1]||(a[1]=i("div",{class:"absolute inset-0 opacity-5"},[i("div",{class:"absolute inset-0",style:{"background-image":"radial-gradient(circle at 1px 1px, rgba(0,0,0,0.15) 1px, transparent 0)","background-size":"20px 20px"}})],-1)),i("div",Ee,[i("div",_e,[i("div",Te,[U(s.$slots,"default")])])]),g(A,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 translate-y-2 scale-95","enter-to-class":"opacity-100 translate-y-0 scale-100","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 translate-y-0 scale-100","leave-to-class":"opacity-0 translate-y-2 scale-95"},{default:b(()=>[e.value?(h(),f("button",{key:0,onClick:r,class:"fixed bottom-6 right-6 z-30 w-12 h-12 bg-primary-600 hover:bg-primary-700 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},[...a[0]||(a[0]=[i("svg",{class:"w-5 h-5 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"})],-1)])])):I("",!0)]),_:1})]))}}),ke={class:"flex h-screen bg-gradient-to-br from-gray-50 to-gray-100"},Se={class:"flex-1 flex flex-col overflow-hidden"},Pe=_({__name:"AppLayout",setup(n){const e=E(!1),t=()=>{e.value=!e.value},r=()=>{e.value=!1};return(s,a)=>(h(),f("div",ke,[g(C,{"is-open":e.value,onToggle:t,class:"hidden lg:block"},null,8,["is-open"]),g(A,{"enter-active-class":"transition-opacity duration-300 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-200 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:b(()=>[e.value?(h(),f("div",{key:0,class:"fixed inset-0 z-40 lg:hidden",onClick:r},[...a[0]||(a[0]=[i("div",{class:"absolute inset-0 bg-gray-900 bg-opacity-50 backdrop-blur-sm"},null,-1)])])):I("",!0)]),_:1}),g(C,{"is-open":e.value,onToggle:t,class:"lg:hidden"},null,8,["is-open"]),i("div",Se,[g(me,{onToggleSidebar:t}),g(xe,null,{default:b(()=>[U(s.$slots,"default")]),_:3})])]))}}),Oe={id:"app"},Re=_({__name:"App",setup(n){return(e,t)=>{const r=L("router-view");return h(),f("div",Oe,[g(Pe,null,{default:b(()=>[g(r,null,{default:b(({Component:s})=>[g(A,{name:"page",mode:"out-in","enter-active-class":"transition-opacity duration-200 ease-out","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity duration-150 ease-in","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:b(()=>[(h(),M(D(s)))]),_:2},1024)]),_:1})]),_:1})])}}});class v extends Error{constructor(e,t,r,s){super(e),this.status=t,this.code=r,this.details=s,this.name="ApiError"}get isNetworkError(){return this.status===0||this.status>=500}get isClientError(){return this.status>=400&&this.status<500}get isServerError(){return this.status>=500}}class Ie{constructor(e="/api"){l(this,"baseUrl");this.baseUrl=e}async request(e,t={}){const r=`${this.baseUrl}${e}`,s=await fetch(r,{headers:{"Content-Type":"application/json",...t.headers},...t});if(!s.ok){const a=await s.json().catch(()=>({}));throw new v(a.message||`HTTP ${s.status}`,s.status,a.code,a)}return s.json()}async getTransactions(e){const t=e?`?${new URLSearchParams(e).toString()}`:"";return this.request(`/transactions${t}`)}async getTransaction(e){return this.request(`/transactions/${e}`)}async createTransaction(e){return this.request("/transactions",{method:"POST",body:JSON.stringify(e)})}async updateTransaction(e,t){return this.request(`/transactions/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteTransaction(e){return this.request(`/transactions/${e}`,{method:"DELETE"})}async approveTransaction(e,t){return this.request(`/transactions/${e}/approve`,{method:"POST",body:JSON.stringify({approvedBy:t})})}async rejectTransaction(e){return this.request(`/transactions/${e}/reject`,{method:"POST"})}async getAccounts(e){const t=e?`?${new URLSearchParams(e).toString()}`:"";return this.request(`/accounts${t}`)}async getAccount(e){return this.request(`/accounts/${e}`)}async getAccountTypes(){return this.request("/accounts/types")}async toggleAccountStatus(e){return this.request(`/accounts/${e}/toggle`,{method:"POST"})}async createAccount(e){return this.request("/accounts",{method:"POST",body:JSON.stringify(e)})}async updateAccount(e,t){return this.request(`/accounts/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteAccount(e){return this.request(`/accounts/${e}`,{method:"DELETE"})}async getPosts(){return this.request("/posts")}async getPost(e){return this.request(`/posts/${e}`)}async checkPostFinancialSuggestion(e){return this.request(`/posts/${e}/financial-suggestion`)}async createPost(e){return this.request("/posts",{method:"POST",body:JSON.stringify(e)})}async updatePost(e,t){return this.request(`/posts/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deletePost(e){return this.request(`/posts/${e}`,{method:"DELETE"})}async getUsers(){return this.request("/users")}async getUser(e){return this.request(`/users/${e}`)}async addUserPersona(e,t){return this.request(`/users/${e}/personas`,{method:"POST",body:JSON.stringify(t)})}async removeUserPersona(e,t){return this.request(`/users/${e}/personas/${t}`,{method:"DELETE"})}async createUser(e){return this.request("/users",{method:"POST",body:JSON.stringify(e)})}async updateUser(e,t){return this.request(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteUser(e){return this.request(`/users/${e}`,{method:"DELETE"})}}const ze=new Ie;class Ae{constructor(){l(this,"errors",[]);l(this,"maxErrors",100)}log(e,t){const r=this.enhanceError(e,t);return this.errors.unshift(r),this.errors.length>this.maxErrors&&(this.errors=this.errors.slice(0,this.maxErrors)),this.sendToLoggingService(r),r}enhanceError(e,t){const r=typeof e=="string"?e:e.message,s=typeof e=="object"?e.stack:void 0;return{id:crypto.randomUUID(),message:r,category:this.categorizeError(e),severity:this.determineSeverity(e),timestamp:new Date,context:t,stack:s,userAgent:navigator.userAgent,url:window.location.href,userId:this.getCurrentUserId(),recoverable:this.isRecoverable(e),retryable:this.isRetryable(e)}}categorizeError(e){const r=(typeof e=="string"?e:e.message).toLowerCase();if(e instanceof v){if(e.status===401)return"authentication";if(e.status===403)return"authorization";if(e.status>=400&&e.status<500)return"client";if(e.status>=500)return"server";if(e.isNetworkError)return"network"}return r.includes("validation")||r.includes("required")?"validation":r.includes("network")||r.includes("fetch")?"network":r.includes("unauthorized")||r.includes("authentication")?"authentication":r.includes("forbidden")||r.includes("permission")?"authorization":r.includes("server")||r.includes("internal")?"server":r.includes("security")||r.includes("xss")||r.includes("injection")?"security":r.includes("balance")||r.includes("transaction")||r.includes("account")?"business":"client"}determineSeverity(e){const r=(typeof e=="string"?e:e.message).toLowerCase();return r.includes("security")||r.includes("injection")||r.includes("xss")||e instanceof v&&e.status>=500?"critical":r.includes("data loss")||r.includes("corruption")||e instanceof v&&e.status===401?"high":e instanceof v&&e.status>=400&&e.status<500||r.includes("validation")||r.includes("required")?"medium":"low"}isRecoverable(e){if(e instanceof v&&(e.isClientError||e.isNetworkError||e.isServerError))return!0;const r=(typeof e=="string"?e:e.message).toLowerCase();return!(r.includes("security")||r.includes("injection"))}isRetryable(e){if(e instanceof v){if(e.isNetworkError||e.isServerError||e.status===429)return!0;if(e.isClientError)return!1}const r=(typeof e=="string"?e:e.message).toLowerCase();return r.includes("network")||r.includes("timeout")?!0:!(r.includes("validation")||r.includes("required"))}getCurrentUserId(){}async sendToLoggingService(e){try{const t=localStorage.getItem("app_errors")||"[]",r=JSON.parse(t);r.unshift(e);const s=r.slice(0,50);localStorage.setItem("app_errors",JSON.stringify(s))}catch(t){console.warn("Failed to store error in localStorage:",t)}}getErrors(){return[...this.errors]}getErrorsByCategory(e){return this.errors.filter(t=>t.category===e)}getErrorsBySeverity(e){return this.errors.filter(t=>t.severity===e)}clearErrors(){this.errors=[],localStorage.removeItem("app_errors")}}const d={NETWORK_ERROR:"Unable to connect to the server. Please check your internet connection and try again.",TIMEOUT_ERROR:"The request took too long to complete. Please try again.",UNAUTHORIZED:"You need to sign in to perform this action.",FORBIDDEN:"You don't have permission to perform this action.",VALIDATION_FAILED:"Please check your input and try again.",TRANSACTION_NOT_BALANCED:"Transaction must balance - total debits must equal total credits.",ACCOUNT_IN_USE:"This account cannot be deleted because it's used in transactions.",POST_HAS_TRANSACTION:"This post cannot be deleted because it has an associated transaction.",SERVER_ERROR:"Something went wrong on our end. Please try again later.",UNKNOWN_ERROR:"An unexpected error occurred. Please try again."};function Fe(n,e){const t=typeof n=="string"?n:n.message,r=t.toLowerCase();if(r.includes("network")||r.includes("fetch failed"))return d.NETWORK_ERROR;if(r.includes("timeout"))return d.TIMEOUT_ERROR;if(r.includes("unauthorized")||r.includes("401"))return d.UNAUTHORIZED;if(r.includes("forbidden")||r.includes("403"))return d.FORBIDDEN;if(r.includes("validation")||r.includes("required"))return d.VALIDATION_FAILED;if(r.includes("balance"))return d.TRANSACTION_NOT_BALANCED;if(r.includes("account")&&r.includes("used"))return d.ACCOUNT_IN_USE;if(r.includes("post")&&r.includes("transaction"))return d.POST_HAS_TRANSACTION;if(n instanceof v){if(n.isServerError)return d.SERVER_ERROR;if(n.isNetworkError)return d.NETWORK_ERROR}return t.length<100&&!t.includes("Error:")&&!t.includes("Exception")?t:e||d.UNKNOWN_ERROR}function He(n){const e=[];return n.retryable&&e.push({type:"retry",label:"Try Again",description:"Attempt the operation again",action:()=>window.location.reload()}),n.category==="network"&&e.push({type:"refresh",label:"Refresh Page",description:"Reload the page to restore connection",action:()=>window.location.reload()}),n.category==="authentication"&&e.push({type:"navigate",label:"Sign In",description:"Go to the sign in page",action:()=>{console.log("Navigate to login")}}),n.category==="validation"&&e.push({type:"ignore",label:"Review Form",description:"Check your input and correct any errors",action:()=>{const t=document.querySelector(".border-red-300, .border-error-300");t==null||t.scrollIntoView({behavior:"smooth",block:"center"})}}),(n.severity==="high"||n.severity==="critical")&&e.push({type:"contact",label:"Contact Support",description:"Report this issue to our support team",action:()=>{console.log("Contact support with error:",n.id)}}),e}class $e{constructor(e){l(this,"errorLogger",new Ae);l(this,"onError");this.onError=e,this.setupGlobalHandlers()}setupGlobalHandlers(){window.addEventListener("unhandledrejection",e=>{var r;const t=this.errorLogger.log(e.reason,{type:"unhandledrejection",promise:e.promise});(r=this.onError)==null||r.call(this,t)}),window.addEventListener("error",e=>{var r;const t=this.errorLogger.log(e.error||e.message,{type:"javascript",filename:e.filename,lineno:e.lineno,colno:e.colno});(r=this.onError)==null||r.call(this,t)}),window.addEventListener("error",e=>{var t;if(e.target!==window){const r=e.target,s=this.errorLogger.log(`Failed to load resource: ${r.tagName}`,{type:"resource",src:r.src||r.href,tagName:r.tagName});(t=this.onError)==null||t.call(this,s)}},!0)}handleError(e,t){var s;const r=this.errorLogger.log(e,t);return(s=this.onError)==null||s.call(this,r),r}getErrorLogger(){return this.errorLogger}}const q=new $e;q.getErrorLogger();class Ce{constructor(){l(this,"threats",[]);l(this,"maxThreats",1e3);l(this,"suspiciousIPs",new Map);l(this,"blockedIPs",new Set);l(this,"alertThresholds",{xss:3,sql_injection:2,path_traversal:5,rate_limit:10,suspicious_activity:5,csrf:3,data_exfiltration:1})}logThreat(e){const t={...e,id:crypto.randomUUID(),timestamp:new Date};if(this.threats.unshift(t),this.threats.length>this.maxThreats&&(this.threats=this.threats.slice(0,this.maxThreats)),e.ip){const r=this.suspiciousIPs.get(e.ip)||0;this.suspiciousIPs.set(e.ip,r+1);const s=this.alertThresholds[e.type]||5;r+1>=s&&e.severity!=="low"&&(this.blockedIPs.add(e.ip),console.warn(`IP ${e.ip} has been auto-blocked due to ${e.type} threats (${r+1} attempts)`),this.logThreat({type:"suspicious_activity",severity:"high",description:`IP auto-blocked after ${r+1} ${e.type} attempts`,payload:`IP: ${e.ip}`,ip:e.ip,userAgent:e.userAgent,blocked:!0,context:{autoBlock:!0,originalThreatType:e.type}}))}return this.sendToSecurityService(t),t}async sendToSecurityService(e){try{const t=localStorage.getItem("security_threats")||"[]",r=JSON.parse(t);r.unshift(e);const s=r.slice(0,100);localStorage.setItem("security_threats",JSON.stringify(s))}catch(t){console.error("Failed to store security threat:",t)}}isIPBlocked(e){return this.blockedIPs.has(e)}getThreats(e,t=100){let r=this.threats;return e&&(r=this.threats.filter(s=>s.type===e)),r.slice(0,t)}getThreatsByIP(e){return this.threats.filter(t=>t.ip===e)}getThreatsBySeverity(e){return this.threats.filter(t=>t.severity===e)}getSuspiciousIPs(){return Array.from(this.suspiciousIPs.entries()).map(([e,t])=>{const r=this.getThreatsByIP(e),s=r.length>0?r[0].timestamp:new Date;return{ip:e,threatCount:t,blocked:this.blockedIPs.has(e),lastThreat:s}})}getSecurityMetrics(){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=this.threats.filter(o=>o.timestamp>=t).length,s=new Map;this.threats.forEach(o=>{s.set(o.type,(s.get(o.type)||0)+1)});const a=Array.from(s.entries()).map(([o,c])=>({type:o,count:c})).sort((o,c)=>c.count-o.count).slice(0,5);return{totalThreats:this.threats.length,threatsToday:r,blockedIPs:this.blockedIPs.size,topThreatTypes:a,recentThreats:this.threats.slice(0,10)}}blockIP(e,t){this.blockedIPs.add(e),this.logThreat({type:"suspicious_activity",severity:"medium",description:`IP manually blocked${t?`: ${t}`:""}`,payload:`IP: ${e}`,ip:e,blocked:!0,context:{manualBlock:!0,reason:t}})}unblockIP(e){this.blockedIPs.delete(e),this.suspiciousIPs.delete(e)}clearThreats(){this.threats=[],this.suspiciousIPs.clear(),localStorage.removeItem("security_threats")}detectAnomalousActivity(e,t){const r=this.getThreatsByIP(e),s=r.filter(o=>Date.now()-o.timestamp.getTime()<6e4);if(s.length>10)return this.logThreat({type:"suspicious_activity",severity:"high",description:"Rapid-fire requests detected",payload:`${s.length} requests in last minute`,ip:e,userAgent:t,blocked:!1,context:{rapidFire:!0,requestCount:s.length}}),!0;const a=new Set(r.map(o=>o.type));return a.size>=3?(this.logThreat({type:"suspicious_activity",severity:"high",description:"Multiple attack vectors from same IP",payload:`Attack types: ${Array.from(a).join(", ")}`,ip:e,userAgent:t,blocked:!1,context:{diverseAttacks:!0,attackTypes:Array.from(a)}}),!0):!1}detectDataExfiltration(e,t,r){return e>1048576||t>10485760?(this.logThreat({type:"data_exfiltration",severity:"high",description:"Suspicious data transfer detected",payload:`Request: ${e} bytes, Response: ${t} bytes`,ip:r,blocked:!1,context:{requestSize:e,responseSize:t}}),!0):!1}generateSecurityReport(){const e=this.getSecurityMetrics(),t=this.getThreatsBySeverity("critical"),r=[];return e.blockedIPs>10&&r.push("Consider implementing geographic IP filtering"),e.topThreatTypes.some(s=>s.type==="xss"&&s.count>5)&&r.push("Review input sanitization and Content Security Policy"),e.topThreatTypes.some(s=>s.type==="sql_injection"&&s.count>3)&&r.push("Audit database queries for SQL injection vulnerabilities"),t.length>0&&r.push("Immediate review required for critical security threats"),e.threatsToday>e.totalThreats*.5&&r.push("Unusual spike in threats today - investigate potential coordinated attack"),{summary:e,recommendations:r,criticalThreats:t}}}const O=new Ce;class Ne{constructor(){l(this,"state");l(this,"maxRetryQueue",10);l(this,"retryDelay",1e3);l(this,"maxRetryDelay",3e4);this.state=E({hasError:!1,errors:[],isOnline:typeof navigator<"u"?navigator.onLine:!0,retryQueue:[]}),this.setupEventListeners()}setupEventListeners(){typeof window>"u"||(window.addEventListener("online",()=>{this.state.value.isOnline=!0,this.processRetryQueue()}),window.addEventListener("offline",()=>{this.state.value.isOnline=!1}),window.addEventListener("unhandledrejection",e=>{this.handleError(e.reason,{component:"Global",action:"unhandledrejection"})}),window.addEventListener("error",e=>{this.handleError(e.error||new Error(e.message),{component:"Global",action:"javascript_error",url:e.filename,userAgent:navigator.userAgent})}),window.addEventListener("error",e=>{if(e.target&&e.target!==window){const t=e.target;this.handleError(new Error(`Failed to load resource: ${t.tagName}`),{component:"Resource",action:"load_error",url:t.src||t.href})}},!0),document.addEventListener("securitypolicyviolation",e=>{this.handleSecurityViolation(e)}))}handleError(e,t){const r=typeof e=="string"?new Error(e):e,s=q.handleError(r,{...t,clientSide:!0,timestamp:new Date().toISOString(),url:window.location.href,userAgent:navigator.userAgent});return this.state.value.errors.unshift(s),this.state.value.hasError=!0,this.state.value.errors.length>100&&(this.state.value.errors=this.state.value.errors.slice(0,100)),this.checkForSecurityThreats(r,t),s}handleSecurityViolation(e){const t={type:"xss",severity:"high",description:`CSP violation: ${e.violatedDirective}`,payload:e.blockedURI||e.sourceFile||"unknown",blocked:!0,context:{violatedDirective:e.violatedDirective,blockedURI:e.blockedURI,sourceFile:e.sourceFile,lineNumber:e.lineNumber,columnNumber:e.columnNumber}};O.logThreat(t),this.handleError(new Error(`Security policy violation: ${e.violatedDirective}`),{component:"Security",action:"csp_violation"})}checkForSecurityThreats(e,t){const r=e.message.toLowerCase();(r.includes("script")||r.includes("eval")||r.includes("javascript:"))&&O.logThreat({type:"xss",severity:"medium",description:"Potential XSS attempt detected in client error",payload:e.message,blocked:!1,context:{clientSide:!0,...t}}),r.includes("fetch")&&r.includes("cors")&&O.logThreat({type:"data_exfiltration",severity:"medium",description:"Potential data exfiltration attempt via CORS error",payload:e.message,blocked:!1,context:{clientSide:!0,...t}})}addToRetryQueue(e){this.state.value.retryQueue.length>=this.maxRetryQueue&&this.state.value.retryQueue.shift(),this.state.value.retryQueue.push(e)}async processRetryQueue(){if(!this.state.value.isOnline||this.state.value.retryQueue.length===0)return;const e=[...this.state.value.retryQueue];this.state.value.retryQueue=[];for(const t of e)try{await t()}catch(r){setTimeout(()=>{this.addToRetryQueue(t)},Math.min(this.retryDelay*2,this.maxRetryDelay)),this.handleError(r,{component:"RetryQueue",action:"retry_failed"})}}async retryOperation(e,t){try{return await t(),this.state.value.errors=this.state.value.errors.filter(r=>r.id!==e),this.state.value.errors.length===0&&(this.state.value.hasError=!1),!0}catch(r){return this.handleError(r,{component:"Manual",action:"retry_failed"}),!1}}clearError(e){this.state.value.errors=this.state.value.errors.filter(t=>t.id!==e),this.state.value.errors.length===0&&(this.state.value.hasError=!1)}clearAllErrors(){this.state.value.errors=[],this.state.value.hasError=!1}getErrorStats(){const e={},t={};return this.state.value.errors.forEach(r=>{e[r.category]=(e[r.category]||0)+1,t[r.severity]=(t[r.severity]||0)+1}),{total:this.state.value.errors.length,byCategory:e,bySeverity:t,recent:this.state.value.errors.slice(0,10)}}get hasError(){return{value:this.state.value.hasError}}get errors(){return{value:this.state.value.errors}}get isOnline(){return{value:this.state.value.isOnline}}get retryQueueLength(){return{value:this.state.value.retryQueue.length}}}const N=new Ne,Le={install(n){n.config.globalProperties.$errorHandler=N,n.config.errorHandler=(e,t,r)=>{var s;N.handleError(e,{component:((s=t==null?void 0:t.$options)==null?void 0:s.name)||"Unknown",action:"vue_error",userAgent:navigator.userAgent})}}};class Me{constructor(){l(this,"metrics",[]);l(this,"observers",[]);l(this,"maxMetrics",1e3);this.initializeObservers()}initializeObservers(){if(typeof window<"u"&&"PerformanceObserver"in window){try{const e=new PerformanceObserver(t=>{for(const r of t.getEntries())if(r.entryType==="navigation"){const s=r;this.recordMetric("page_load_time",s.loadEventEnd-s.startTime,"timing"),this.recordMetric("dom_content_loaded",s.domContentLoadedEventEnd-s.startTime,"timing"),this.recordMetric("first_paint",s.responseStart-s.startTime,"timing")}});e.observe({entryTypes:["navigation"]}),this.observers.push(e)}catch(e){console.warn("Navigation timing observer not supported:",e)}try{const e=new PerformanceObserver(t=>{for(const r of t.getEntries())if(r.entryType==="resource"){const s=r;this.recordMetric("resource_load_time",s.responseEnd-s.startTime,"timing",{resource_type:s.initiatorType,resource_name:s.name.split("/").pop()||"unknown"})}});e.observe({entryTypes:["resource"]}),this.observers.push(e)}catch(e){console.warn("Resource timing observer not supported:",e)}try{const e=new PerformanceObserver(t=>{for(const r of t.getEntries())r.entryType==="largest-contentful-paint"&&this.recordMetric("largest_contentful_paint",r.startTime,"timing")});e.observe({entryTypes:["largest-contentful-paint"]}),this.observers.push(e)}catch(e){console.warn("LCP observer not supported:",e)}try{const e=new PerformanceObserver(t=>{for(const r of t.getEntries())if(r.entryType==="first-input"){const s=r;this.recordMetric("first_input_delay",s.processingStart-s.startTime,"timing")}});e.observe({entryTypes:["first-input"]}),this.observers.push(e)}catch(e){console.warn("FID observer not supported:",e)}}}recordMetric(e,t,r,s){const a={name:e,value:t,timestamp:Date.now(),type:r,tags:s};this.metrics.unshift(a),this.metrics.length>this.maxMetrics&&(this.metrics=this.metrics.slice(0,this.maxMetrics)),r==="timing"&&(e==="page_load_time"&&t>3e3&&console.warn(`Slow page load detected: ${t}ms`),e==="largest_contentful_paint"&&t>2500&&console.warn(`Poor LCP detected: ${t}ms`),e==="first_input_delay"&&t>100&&console.warn(`Poor FID detected: ${t}ms`))}getMetrics(e,t=100){let r=this.metrics;return e&&(r=this.metrics.filter(s=>s.name===e)),r.slice(0,t)}getAverageMetric(e,t=3e5){const r=Date.now(),s=this.metrics.filter(o=>o.name===e&&r-o.timestamp<=t);return s.length===0?null:s.reduce((o,c)=>o+c.value,0)/s.length}clearMetrics(){this.metrics=[]}disconnect(){this.observers.forEach(e=>e.disconnect()),this.observers=[]}}function x(n){return()=>{const e=performance.now();return n().then(t=>{const r=performance.now();return w.recordMetric("lazy_component_load",r-e,"timing"),t})}}const w=new Me,De={install(n){n.config.globalProperties.$performance=w,n.provide("performance",w)}};w.recordMetric("app_start",performance.now(),"timing");const j=te({history:re(),routes:[{path:"/",name:"Feed",component:x(()=>T(()=>import("./SimpleHome-TMSNiSXy.js"),__vite__mapDeps([0,1,2,3])))},{path:"/transactions",name:"Transactions",component:x(()=>T(()=>import("./Transactions-bRtTpiCO.js"),__vite__mapDeps([4,1])))},{path:"/accounts",name:"Accounts",component:x(()=>T(()=>import("./Accounts-C1XnudU9.js"),__vite__mapDeps([5,1,3,6])))},{path:"/user-demo",name:"UserDemo",component:x(()=>T(()=>import("./UserDemo-OPHByCuy.js"),__vite__mapDeps([7,2,1,6])))}]});j.beforeEach((n,e,t)=>{w.recordMetric("route_navigation",performance.now(),"timing",{from:e.path,to:n.path}),t()});const k=se(Re);k.use(j);k.use(Le);k.use(De);const Ue=performance.now();k.mount("#app");const qe=performance.now();w.recordMetric("app_mount",qe-Ue,"timing");window.addEventListener("beforeunload",()=>{w.recordMetric("app_unload",performance.now(),"timing")});export{v as A,ze as a,Fe as b,He as c,q as g};
