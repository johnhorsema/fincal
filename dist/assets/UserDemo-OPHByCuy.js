import{u as j,_ as T}from"./PersonaSelector.vue_vue_type_script_setup_true_lang-DV2e7bl_.js";import{d as S,a as n,o,n as k,b as e,l as x,t as l,D as s,h as L,r as $,s as N,G as V,w as O,B as q,f as G,F as D,g as A,k as P,j as J}from"./vendor-D5qdfc4z.js";import"./index-Ckg37GOx.js";/* empty css                                                                      */const R={class:"p-3"},W={class:"flex items-center space-x-3"},H={class:"flex-shrink-0"},K={key:0,class:"w-8 h-8 rounded-full overflow-hidden"},Q=["src","alt"],X={class:"flex-1 min-w-0"},Y={class:"text-sm font-medium text-gray-900 truncate"},Z={class:"text-xs text-gray-500 capitalize truncate"},ee={key:0,class:"flex-shrink-0"},te=S({__name:"UserPersona",props:{persona:{},isSelected:{type:Boolean}},emits:["select"],setup(g){function c(u){const i={accountant:"bg-blue-500",marketing:"bg-purple-500",sales:"bg-green-500",manager:"bg-orange-500",admin:"bg-red-500",default:"bg-gray-500"};return i[u.toLowerCase()]||i.default}return(u,i)=>(o(),n("div",{class:k(["persona-card cursor-pointer rounded-lg border-2 transition-all duration-200 hover:shadow-md",[g.isSelected?"border-blue-500 bg-blue-50 shadow-sm":"border-gray-200 bg-white hover:border-gray-300"]]),onClick:i[0]||(i[0]=f=>u.$emit("select"))},[e("div",R,[e("div",W,[e("div",H,[g.persona.avatar?(o(),n("div",K,[e("img",{src:g.persona.avatar,alt:g.persona.name,class:"w-full h-full object-cover"},null,8,Q)])):(o(),n("div",{key:1,class:k(["w-8 h-8 rounded-full flex items-center justify-center text-white text-sm font-medium",c(g.persona.role)])},l(g.persona.name.charAt(0).toUpperCase()),3))]),e("div",X,[e("h4",Y,l(g.persona.name),1),e("p",Z,l(g.persona.role),1)]),g.isSelected?(o(),n("div",ee,[...i[1]||(i[1]=[e("svg",{class:"w-5 h-5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)])])):x("",!0)])])],2))}}),se={class:"user-profile"},oe={key:0,class:"bg-white rounded-lg shadow-sm border p-4"},ne={class:"flex items-center justify-between mb-4"},re={class:"flex items-center space-x-3"},ae={class:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center text-white font-medium"},le={class:"text-sm font-medium text-gray-900"},ie={class:"text-sm text-gray-500"},de={key:0,class:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200"},ce={class:"flex items-center justify-between"},ue={class:"flex items-center space-x-2"},me={class:"text-sm font-medium text-gray-900"},ge={class:"text-xs text-gray-600 capitalize"},fe={key:1},be={key:2,class:"text-center py-4"},xe={key:1,class:"text-center py-8"},pe=S({__name:"UserProfile",emits:["show-login","persona-changed"],setup(g,{emit:c}){const u=c,{currentUser:i,currentPersona:f,logout:v,switchPersona:_}=j();function b(){v()}function w(d){if(d)try{_(d),u("persona-changed",d)}catch(a){console.error("Failed to switch persona:",a)}}function U(d){const a={accountant:"bg-blue-500",marketing:"bg-purple-500",sales:"bg-green-500",manager:"bg-orange-500",admin:"bg-red-500",default:"bg-gray-500"};return a[d.toLowerCase()]||a.default}return(d,a)=>(o(),n("div",se,[s(i)?(o(),n("div",oe,[e("div",ne,[e("div",re,[e("div",ae,l(s(i).name.charAt(0).toUpperCase()),1),e("div",null,[e("h3",le,l(s(i).name),1),e("p",ie,l(s(i).email),1)])]),e("button",{onClick:b,class:"text-sm text-gray-500 hover:text-gray-700 focus:outline-none"}," Sign Out ")]),s(f)?(o(),n("div",de,[e("div",ce,[e("div",ue,[e("div",{class:k(["w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-medium",U(s(f).role)])},l(s(f).name.charAt(0).toUpperCase()),3),e("div",null,[e("p",me,l(s(f).name),1),e("p",ge,l(s(f).role),1)])]),a[1]||(a[1]=e("span",{class:"text-xs text-blue-600 font-medium"},"Active",-1))])])):x("",!0),s(i).personas.length>1?(o(),n("div",fe,[L(T,{personas:s(i).personas,"selected-persona":s(f),label:"Switch Persona",onChange:w},null,8,["personas","selected-persona"])])):s(i).personas.length===0?(o(),n("div",be,[...a[2]||(a[2]=[e("p",{class:"text-sm text-gray-500"},"No personas available",-1)])])):x("",!0)])):(o(),n("div",xe,[a[3]||(a[3]=e("p",{class:"text-gray-500 mb-4"},"Please sign in to continue",-1)),e("button",{onClick:a[0]||(a[0]=p=>d.$emit("show-login")),class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"}," Sign In ")]))]))}}),he={class:"login-form max-w-md mx-auto bg-white rounded-lg shadow-md p-6"},ve={class:"mb-4"},ye={key:0,class:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md"},_e={class:"text-sm text-red-600"},we=["disabled"],$e={key:0},ke={key:1},Ue={class:"mt-6"},Ce={class:"mt-4 space-y-2"},Se=["onClick"],Pe={class:"flex items-center space-x-2"},Le={class:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm font-medium"},De={class:"text-sm font-medium text-gray-900"},Ae={class:"text-xs text-gray-500"},je=S({__name:"LoginForm",emits:["login-success"],setup(g,{emit:c}){const u=c,{login:i,getAllUsers:f}=j(),v=$(""),_=$(!1),b=$(""),w=$([]);async function U(){if(!v.value.trim()){b.value="Please enter an email address";return}_.value=!0,b.value="";try{await i(v.value.trim())?u("login-success"):b.value="User not found. Please try one of the demo users below."}catch(p){b.value="Login failed. Please try again.",console.error("Login error:",p)}finally{_.value=!1}}async function d(p){v.value=p,await U()}async function a(){try{w.value=await f()}catch(p){console.error("Failed to load demo users:",p)}}return N(()=>{a()}),(p,h)=>(o(),n("div",he,[h[3]||(h[3]=e("div",{class:"text-center mb-6"},[e("h2",{class:"text-2xl font-bold text-gray-900"},"Welcome Back"),e("p",{class:"text-gray-600 mt-2"},"Sign in to your account")],-1)),e("form",{onSubmit:V(U,["prevent"])},[e("div",ve,[h[1]||(h[1]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email Address ",-1)),O(e("input",{id:"email","onUpdate:modelValue":h[0]||(h[0]=y=>v.value=y),type:"email",required:"",class:k(["w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",{"border-red-300":b.value}]),placeholder:"Enter your email"},null,2),[[q,v.value]])]),b.value?(o(),n("div",ye,[e("p",_e,l(b.value),1)])):x("",!0),e("button",{type:"submit",disabled:_.value,class:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"},[_.value?(o(),n("span",$e,"Signing in...")):(o(),n("span",ke,"Sign In"))],8,we)],32),e("div",Ue,[h[2]||(h[2]=G('<div class="relative"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-300"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-white text-gray-500">Demo Users</span></div></div>',1)),e("div",Ce,[(o(!0),n(D,null,A(w.value,y=>(o(),n("button",{key:y.id,type:"button",class:"w-full text-left px-3 py-2 border border-gray-200 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500",onClick:E=>d(y.email)},[e("div",Pe,[e("div",Le,l(y.name.charAt(0).toUpperCase()),1),e("div",null,[e("p",De,l(y.name),1),e("p",Ae,l(y.email),1)])])],8,Se))),128))])])]))}}),Ee={class:"user-demo p-6 max-w-4xl mx-auto"},Ne={class:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8"},Be={class:"bg-white rounded-lg shadow-sm border p-6"},Me={key:0},ze={key:1},Fe={class:"bg-white rounded-lg shadow-sm border p-6"},Ie={class:"space-y-4"},Te={key:0},Ve={class:"text-sm text-gray-900"},Oe={key:1},qe={class:"flex items-center space-x-2"},Ge={class:"text-sm text-gray-900"},Je={class:"font-medium"},Re={class:"text-gray-500 ml-1 capitalize"},We={key:0,class:"bg-white rounded-lg shadow-sm border p-6 mb-8"},He={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Ke={class:"bg-white rounded-lg shadow-sm border p-6"},Qe={class:"space-y-4"},Xe=["disabled"],Ye={key:0},Ze={class:"bg-white rounded-lg shadow-sm border p-6 mt-8"},et={class:"space-y-2 max-h-64 overflow-y-auto"},tt={class:"flex justify-between items-start"},st={class:"font-medium"},ot={class:"text-xs text-gray-500"},nt={key:0,class:"text-xs text-gray-600 mt-1"},rt={key:0,class:"text-center py-4 text-gray-500"},ut=S({__name:"UserDemo",setup(g){const{currentUser:c,currentPersona:u,isAuthenticated:i,logout:f,switchPersona:v,createUser:_,initializeAuth:b}=j(),w=$(!1),U=$(!1),d=$([]);function a(r,t,m){d.value.unshift({type:r,message:t,timestamp:new Date,data:m}),d.value.length>20&&(d.value=d.value.slice(0,20))}function p(){var r,t;a("success","User logged in successfully",{user:(r=c.value)==null?void 0:r.name,email:(t=c.value)==null?void 0:t.email})}function h(r){var t;a("info","Persona switched",{from:(t=u.value)==null?void 0:t.name,to:r.name,role:r.role})}function y(r){try{v(r),a("success","Persona selected",{persona:r.name,role:r.role})}catch(t){a("error","Failed to switch persona",{error:t instanceof Error?t.message:"Unknown error"})}}async function E(){w.value=!0;try{const r=await _({name:`Demo User ${Date.now()}`,email:`demo${Date.now()}@example.com`,personas:[{id:crypto.randomUUID(),name:"Accountant",role:"accountant"},{id:crypto.randomUUID(),name:"Marketing Manager",role:"marketing"},{id:crypto.randomUUID(),name:"Sales Rep",role:"sales"},{id:crypto.randomUUID(),name:"Operations Manager",role:"manager"}]});r?a("success","Demo user created",{name:r.name,email:r.email,personas:r.personas.length}):a("error","Failed to create demo user")}catch(r){a("error","Error creating demo user",{error:r instanceof Error?r.message:"Unknown error"})}finally{w.value=!1}}function B(){var t;const r=(t=c.value)==null?void 0:t.name;f(),a("info","User logged out",{user:r})}function M(){d.value=[]}function z(r){const t={accountant:"bg-blue-500",marketing:"bg-purple-500",sales:"bg-green-500",manager:"bg-orange-500",admin:"bg-red-500",default:"bg-gray-500"};return t[r.toLowerCase()]||t.default}function F(r){return{info:"border-blue-400",success:"border-green-400",warning:"border-yellow-400",error:"border-red-400"}[r]}function I(r){return r.toLocaleTimeString()}return N(async()=>{await b(),a("info","Demo page loaded")}),(r,t)=>(o(),n("div",Ee,[t[14]||(t[14]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"User Management Demo"),e("p",{class:"text-gray-600"}," This demo shows the user management and persona switching functionality. ")],-1)),e("div",Ne,[e("div",Be,[t[1]||(t[1]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Authentication",-1)),s(i)?(o(),n("div",ze,[L(s(pe),{onShowLogin:t[0]||(t[0]=m=>U.value=!0),onPersonaChanged:h})])):(o(),n("div",Me,[L(s(je),{onLoginSuccess:p})]))]),e("div",Fe,[t[8]||(t[8]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Current State",-1)),e("div",Ie,[e("div",null,[t[2]||(t[2]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Authentication Status ",-1)),e("span",{class:k(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s(i)?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},l(s(i)?"Authenticated":"Not Authenticated"),3)]),s(c)?(o(),n("div",Te,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Current User ",-1)),e("div",Ve,[e("p",null,[t[3]||(t[3]=e("strong",null,"Name:",-1)),P(" "+l(s(c).name),1)]),e("p",null,[t[4]||(t[4]=e("strong",null,"Email:",-1)),P(" "+l(s(c).email),1)]),e("p",null,[t[5]||(t[5]=e("strong",null,"Personas:",-1)),P(" "+l(s(c).personas.length),1)])])])):x("",!0),s(u)?(o(),n("div",Oe,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Active Persona ",-1)),e("div",qe,[e("div",{class:k(["w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-medium",z(s(u).role)])},l(s(u).name.charAt(0).toUpperCase()),3),e("div",Ge,[e("span",Je,l(s(u).name),1),e("span",Re,"("+l(s(u).role)+")",1)])])])):x("",!0)])])]),s(c)&&s(c).personas.length>0?(o(),n("div",We,[t[9]||(t[9]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Available Personas",-1)),e("div",He,[(o(!0),n(D,null,A(s(c).personas,m=>{var C;return o(),J(s(te),{key:m.id,persona:m,"is-selected":((C=s(u))==null?void 0:C.id)===m.id,onSelect:at=>y(m)},null,8,["persona","is-selected","onSelect"])}),128))])])):x("",!0),e("div",Ke,[t[12]||(t[12]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Demo Actions",-1)),e("div",Qe,[e("div",null,[e("button",{onClick:E,disabled:w.value,class:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"}," Create Demo User ",8,Xe),t[10]||(t[10]=e("p",{class:"text-sm text-gray-500 mt-1"}," Creates a new user with multiple personas for testing ",-1))]),s(i)?(o(),n("div",Ye,[e("button",{onClick:B,class:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}," Logout "),t[11]||(t[11]=e("p",{class:"text-sm text-gray-500 mt-1"}," Sign out and clear authentication state ",-1))])):x("",!0)])]),e("div",Ze,[t[13]||(t[13]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Event Log",-1)),e("div",et,[(o(!0),n(D,null,A(d.value,(m,C)=>(o(),n("div",{key:C,class:k(["text-sm p-2 bg-gray-50 rounded border-l-4",F(m.type)])},[e("div",tt,[e("span",st,l(m.message),1),e("span",ot,l(I(m.timestamp)),1)]),m.data?(o(),n("div",nt,l(JSON.stringify(m.data,null,2)),1)):x("",!0)],2))),128)),d.value.length===0?(o(),n("div",rt," No events yet. Try logging in or switching personas. ")):x("",!0)]),d.value.length>0?(o(),n("button",{key:0,onClick:M,class:"mt-4 text-sm text-gray-500 hover:text-gray-700"}," Clear Log ")):x("",!0)])]))}});export{ut as default};
